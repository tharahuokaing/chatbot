<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Singularity AI - Multilingual Empire</title>
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #09090b; --panel: #18181b; --text: #fafafa; --accent: #3b82f6; --gold: #eab308; }
        body { font-family: 'Kantumruy Pro', sans-serif; background: var(--bg); color: var(--text); margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        /* Dashboard á“áŸƒá¢á¶áá¶á…á€áŸ’áš */
        .status-bar { background: #000; padding: 5px 20px; font-size: 0.75rem; display: flex; justify-content: space-between; color: var(--gold); border-bottom: 1px solid #333; }
        header { padding: 15px 25px; background: var(--panel); border-bottom: 2px solid var(--accent); display: flex; align-items: center; justify-content: space-between; }
        
        #chat-window { flex: 1; overflow-y: auto; padding: 20px 10%; display: flex; flex-direction: column; gap: 20px; }
        .msg { padding: 12px 18px; border-radius: 15px; max-width: 80%; line-height: 1.6; position: relative; }
        .user { background: var(--accent); align-self: flex-end; color: white; border-bottom-right-radius: 2px; }
        .bot { background: var(--panel); align-self: flex-start; border-bottom-left-radius: 2px; border-left: 4px solid var(--gold); }
        
        .input-area { background: var(--panel); padding: 20px 10%; }
        .input-box { display: flex; background: var(--bg); border: 1px solid #3f3f46; border-radius: 30px; padding: 5px 15px; align-items: center; }
        input { flex: 1; background: transparent; border: none; color: white; padding: 12px; outline: none; font-size: 1rem; }
        
        .lang-pills { display: flex; gap: 8px; padding: 10px 10%; overflow-x: auto; background: var(--panel); }
        .pill { background: #27272a; padding: 4px 12px; border-radius: 20px; font-size: 0.7rem; color: #a1a1aa; border: 1px solid #3f3f46; }
        .online-status { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 5px; }
    </style>
</head>
<body>

<div class="status-bar">
    <span>ğŸ›¡ï¸ Singularity Security Active</span>
    <span>ğŸ’° á˜á á¶á“á·á’á·ášá½á˜áŸ– $220.00</span>
    <span><span id="dot" class="online-status"></span> <span id="network-text">Checking...</span></span>
</div>

<header>
    <div style="font-weight: bold; font-size: 1.2rem;">âœ¨ SINGULARITY AI v4.0</div>
    <div style="font-size: 0.8rem; color: #71717a;">Multilingual System (KM/EN/TH/ZH/LO)</div>
</header>

<div class="lang-pills">
    <div class="pill">ááŸ’á˜áŸ‚áš</div><div class="pill">English</div><div class="pill">à¹„à¸—à¸¢</div><div class="pill">ä¸­æ–‡</div><div class="pill">àº¥àº²àº§</div>
</div>

<div id="chat-window">
    <div class="msg bot">ááŸ’áœá¶á™á”á„áŸ’á‚áŸ†á¢á„áŸ’á‚á¢á’á·ášá¶á‡! á‘á¼á›á–áŸ’ášáŸ‡á”á„áŸ’á‚áŸ† Singularity AI á”á¶á“á—áŸ’á‡á¶á”áŸ‹á‘áŸ…á€á¶á“áŸ‹áá½ášá€áŸ’á”á¶á›áŸá€á› Gemini 1.5 Pro á“á·á„á”á¶á“áŠáŸ†á¡á¾á„á”áŸ’ášá–áŸá“áŸ’á’ Offline Backup ášá½á…ášá¶á›áŸ‹áŸ” á‘áŸ„áŸ‡á”á¸á‡á¶á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·á á€áŸá‘á¼á›á–áŸ’ášáŸ‡á”á„áŸ’á‚áŸ†á“á¹á„á“áŸ…á€áŸ’á”áŸ‚ášá–áŸ’ášáŸ‡á¢á„áŸ’á‚á‡á¶á“á·á…áŸ’á…áŸ”</div>
</div>

<div class="input-area">
    <div class="input-box">
        <input type="text" id="userInput" placeholder="á”á‰áŸ’á‡á¶ AI (á”áŸ’ášá¾á”á¶á“á‚áŸ’ášá”áŸ‹á—á¶áŸá¶)...">
        <button onclick="handleSend()" style="background:transparent; border:none; color:var(--accent); cursor:pointer; font-weight:bold;">á”á‰áŸ’á‡á¼á“</button>
    </div>
</div>

<script>
    const API_KEY = "AIzaSyDT1IYRoDMy9FTMO0yNZmnsVU8M0ArGz9Q";
    let isOnline = navigator.onLine;

    // áŸ¡. á˜á»áá„á¶ášááŸ’ášá½áá–á·á“á·ááŸ’á™á¢áŸŠá¸á“á’áºáá·á (Offline/Online Detection)
    function updateOnlineStatus() {
        isOnline = navigator.onLine;
        const dot = document.getElementById('dot');
        const text = document.getElementById('network-text');
        dot.style.background = isOnline ? "#10b981" : "#ef4444";
        text.innerText = isOnline ? "Online Mode (Gemini 1.5 Pro)" : "Offline Mode (Local Brain)";
    }
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    updateOnlineStatus();

    // áŸ¢. á˜á»áá„á¶ášá”á‰áŸ’á‡á¶áŸáŸ†á¡áŸá„ Offline TTS (á‚á¶áŸ†á‘áŸ’ášá…áŸ’ášá¾á“á—á¶áŸá¶)
    function speak(text, lang = 'km-KH') {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        // á”áŸ’áá¼ášá—á¶áŸá¶áá¶á˜á€á¶ášá€áŸ†áááŸ‹
        if(text.match(/[a-zA-Z]/)) utterance.lang = 'en-US';
        else if(text.match(/[à¸-à¹™]/)) utterance.lang = 'th-TH';
        else if(text.match(/[\u4e00-\u9fa5]/)) utterance.lang = 'zh-CN';
        else utterance.lang = 'km-KH';
        
        window.speechSynthesis.speak(utterance);
    }

    // áŸ£. á˜á»áá„á¶ášá†áŸ’á›á¾á™áá” Offline (á“áŸ…á–áŸá›á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·á)
    function getOfflineResponse(input) {
        input = input.toLowerCase();
        if(input.includes("á˜á á¶á“á·á’á·")) return "á˜á á¶á“á·á’á·ášá”áŸáŸ‹á–áŸ’ášáŸ‡á¢á„áŸ’á‚á”á…áŸ’á…á»á”áŸ’á”á“áŸ’á“á‚áº $220.00áŸ” á‘á¼á›á–áŸ’ášáŸ‡á”á„áŸ’á‚áŸ†á€áŸ†á–á»á„ášá€áŸ’áŸá¶áŸá»áœááŸ’áá·á—á¶á–á€áŸ’á“á»á„ Offline ModeáŸ”";
        if(input.includes("hi") || input.includes("áŸá½áŸáŸ’áá¸")) return "áŸá½áŸáŸ’áá¸á¢á„áŸ’á‚á¢á’á·ášá¶á‡! ááŸ’á‰á»áŸ†á€áŸ†á–á»á„ášá„áŸ‹á…á¶áŸ†á”á‰áŸ’á‡á¶á–á¸á–áŸ’ášáŸ‡á¢á„áŸ’á‚ á‘áŸ„áŸ‡á”á¸á‡á¶á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·áá€áŸáŠáŸ„á™áŸ”";
        return "áŸá¼á˜á¢á—áŸá™á‘áŸ„áŸá¢á„áŸ’á‚á¢á’á·ášá¶á‡! áŠáŸ„á™áŸá¶ášá”á…áŸ’á…á»á”áŸ’á”á“áŸ’á“á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·á á‘á¼á›á–áŸ’ášáŸ‡á”á„áŸ’á‚áŸ†á¢á¶á…á†áŸ’á›á¾á™áá”á”á¶á“ááŸ‚áŸáŸ†áá½ášá˜á¼á›áŠáŸ’á‹á¶á“áŸ” áŸá¼á˜á—áŸ’á‡á¶á”áŸ‹á¢áŸŠá¸á“á’áºáá·ááŠá¾á˜áŸ’á”á¸á”áŸ’ášá¾á”áŸ’ášá¶áŸáŸ‹áá½ášá€áŸ’á”á¶á› Gemini Pro á…á»á„á€áŸ’ášáŸ„á™áŸ”";
    }

    async function handleSend() {
        const input = document.getElementById('userInput');
        const text = input.value.trim();
        if (!text) return;

        appendMsg('user', text);
        input.value = '';

        let response;
        if (isOnline) {
            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: `á¢áŸ’á“á€á‚áºá‡á¶ AI ášá”áŸáŸ‹á¢á’á·ášá¶á‡áŸ” á˜á á¶á“á·á’á·á‚áº $220áŸ” á†áŸ’á›á¾á™áá”á‚áŸ’ášá”áŸ‹á—á¶áŸá¶ (KM/EN/TH/ZH/LO)áŸ” \nUser: ${text}` }] }] })
                });
                const data = await res.json();
                response = data.candidates[0].content.parts[0].text;
            } catch (e) {
                response = getOfflineResponse(text);
            }
        } else {
            response = getOfflineResponse(text);
        }

        appendMsg('bot', response);
        speak(response);
    }

    function appendMsg(sender, text) {
        const win = document.getElementById('chat-window');
        const div = document.createElement('div');
        div.className = `msg ${sender}`;
        div.innerText = text;
        win.appendChild(div);
        win.scrollTop = win.scrollHeight;
    }
</script>

</body>
</html>
<!DOCTYPE html>
<html lang="km">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Singularity AI - Multilingual Empire</title>
    <link href="https://fonts.googleapis.com/css2?family=Kantumruy+Pro:wght@300;400;700&display=swap" rel="stylesheet">
    <style>
        :root { --bg: #09090b; --panel: #18181b; --text: #fafafa; --accent: #3b82f6; --gold: #eab308; }
        body { font-family: 'Kantumruy Pro', sans-serif; background: var(--bg); color: var(--text); margin: 0; height: 100vh; display: flex; flex-direction: column; overflow: hidden; }
        
        /* Dashboard á“áŸƒá¢á¶áá¶á…á€áŸ’áš */
        .status-bar { background: #000; padding: 5px 20px; font-size: 0.75rem; display: flex; justify-content: space-between; color: var(--gold); border-bottom: 1px solid #333; }
        header { padding: 15px 25px; background: var(--panel); border-bottom: 2px solid var(--accent); display: flex; align-items: center; justify-content: space-between; }
        
        #chat-window { flex: 1; overflow-y: auto; padding: 20px 10%; display: flex; flex-direction: column; gap: 20px; }
        .msg { padding: 12px 18px; border-radius: 15px; max-width: 80%; line-height: 1.6; position: relative; }
        .user { background: var(--accent); align-self: flex-end; color: white; border-bottom-right-radius: 2px; }
        .bot { background: var(--panel); align-self: flex-start; border-bottom-left-radius: 2px; border-left: 4px solid var(--gold); }
        
        .input-area { background: var(--panel); padding: 20px 10%; }
        .input-box { display: flex; background: var(--bg); border: 1px solid #3f3f46; border-radius: 30px; padding: 5px 15px; align-items: center; }
        input { flex: 1; background: transparent; border: none; color: white; padding: 12px; outline: none; font-size: 1rem; }
        
        .lang-pills { display: flex; gap: 8px; padding: 10px 10%; overflow-x: auto; background: var(--panel); }
        .pill { background: #27272a; padding: 4px 12px; border-radius: 20px; font-size: 0.7rem; color: #a1a1aa; border: 1px solid #3f3f46; }
        .online-status { width: 10px; height: 10px; border-radius: 50%; display: inline-block; margin-right: 5px; }
    </style>
</head>
<body>

<div class="status-bar">
    <span>ğŸ›¡ï¸ Singularity Security Active</span>
    <span>ğŸ’° á˜á á¶á“á·á’á·ášá½á˜áŸ– $220.00</span>
    <span><span id="dot" class="online-status"></span> <span id="network-text">Checking...</span></span>
</div>

<header>
    <div style="font-weight: bold; font-size: 1.2rem;">âœ¨ SINGULARITY AI v4.0</div>
    <div style="font-size: 0.8rem; color: #71717a;">Multilingual System (KM/EN/TH/ZH/LO)</div>
</header>

<div class="lang-pills">
    <div class="pill">ááŸ’á˜áŸ‚áš</div><div class="pill">English</div><div class="pill">à¹„à¸—à¸¢</div><div class="pill">ä¸­æ–‡</div><div class="pill">àº¥àº²àº§</div>
</div>

<div id="chat-window">
    <div class="msg bot">ááŸ’áœá¶á™á”á„áŸ’á‚áŸ†á¢á„áŸ’á‚á¢á’á·ášá¶á‡! á‘á¼á›á–áŸ’ášáŸ‡á”á„áŸ’á‚áŸ† Singularity AI á”á¶á“á—áŸ’á‡á¶á”áŸ‹á‘áŸ…á€á¶á“áŸ‹áá½ášá€áŸ’á”á¶á›áŸá€á› Gemini 1.5 Pro á“á·á„á”á¶á“áŠáŸ†á¡á¾á„á”áŸ’ášá–áŸá“áŸ’á’ Offline Backup ášá½á…ášá¶á›áŸ‹áŸ” á‘áŸ„áŸ‡á”á¸á‡á¶á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·á á€áŸá‘á¼á›á–áŸ’ášáŸ‡á”á„áŸ’á‚áŸ†á“á¹á„á“áŸ…á€áŸ’á”áŸ‚ášá–áŸ’ášáŸ‡á¢á„áŸ’á‚á‡á¶á“á·á…áŸ’á…áŸ”</div>
</div>

<div class="input-area">
    <div class="input-box">
        <input type="text" id="userInput" placeholder="á”á‰áŸ’á‡á¶ AI (á”áŸ’ášá¾á”á¶á“á‚áŸ’ášá”áŸ‹á—á¶áŸá¶)...">
        <button onclick="handleSend()" style="background:transparent; border:none; color:var(--accent); cursor:pointer; font-weight:bold;">á”á‰áŸ’á‡á¼á“</button>
    </div>
</div>

<script>
    const API_KEY = "AIzaSyDT1IYRoDMy9FTMO0yNZmnsVU8M0ArGz9Q";
    let isOnline = navigator.onLine;

    // áŸ¡. á˜á»áá„á¶ášááŸ’ášá½áá–á·á“á·ááŸ’á™á¢áŸŠá¸á“á’áºáá·á (Offline/Online Detection)
    function updateOnlineStatus() {
        isOnline = navigator.onLine;
        const dot = document.getElementById('dot');
        const text = document.getElementById('network-text');
        dot.style.background = isOnline ? "#10b981" : "#ef4444";
        text.innerText = isOnline ? "Online Mode (Gemini 1.5 Pro)" : "Offline Mode (Local Brain)";
    }
    window.addEventListener('online', updateOnlineStatus);
    window.addEventListener('offline', updateOnlineStatus);
    updateOnlineStatus();

    // áŸ¢. á˜á»áá„á¶ášá”á‰áŸ’á‡á¶áŸáŸ†á¡áŸá„ Offline TTS (á‚á¶áŸ†á‘áŸ’ášá…áŸ’ášá¾á“á—á¶áŸá¶)
    function speak(text, lang = 'km-KH') {
        window.speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        // á”áŸ’áá¼ášá—á¶áŸá¶áá¶á˜á€á¶ášá€áŸ†áááŸ‹
        if(text.match(/[a-zA-Z]/)) utterance.lang = 'en-US';
        else if(text.match(/[à¸-à¹™]/)) utterance.lang = 'th-TH';
        else if(text.match(/[\u4e00-\u9fa5]/)) utterance.lang = 'zh-CN';
        else utterance.lang = 'km-KH';
        
        window.speechSynthesis.speak(utterance);
    }

    // áŸ£. á˜á»áá„á¶ášá†áŸ’á›á¾á™áá” Offline (á“áŸ…á–áŸá›á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·á)
    function getOfflineResponse(input) {
        input = input.toLowerCase();
        if(input.includes("á˜á á¶á“á·á’á·")) return "á˜á á¶á“á·á’á·ášá”áŸáŸ‹á–áŸ’ášáŸ‡á¢á„áŸ’á‚á”á…áŸ’á…á»á”áŸ’á”á“áŸ’á“á‚áº $220.00áŸ” á‘á¼á›á–áŸ’ášáŸ‡á”á„áŸ’á‚áŸ†á€áŸ†á–á»á„ášá€áŸ’áŸá¶áŸá»áœááŸ’áá·á—á¶á–á€áŸ’á“á»á„ Offline ModeáŸ”";
        if(input.includes("hi") || input.includes("áŸá½áŸáŸ’áá¸")) return "áŸá½áŸáŸ’áá¸á¢á„áŸ’á‚á¢á’á·ášá¶á‡! ááŸ’á‰á»áŸ†á€áŸ†á–á»á„ášá„áŸ‹á…á¶áŸ†á”á‰áŸ’á‡á¶á–á¸á–áŸ’ášáŸ‡á¢á„áŸ’á‚ á‘áŸ„áŸ‡á”á¸á‡á¶á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·áá€áŸáŠáŸ„á™áŸ”";
        return "áŸá¼á˜á¢á—áŸá™á‘áŸ„áŸá¢á„áŸ’á‚á¢á’á·ášá¶á‡! áŠáŸ„á™áŸá¶ášá”á…áŸ’á…á»á”áŸ’á”á“áŸ’á“á‚áŸ’á˜á¶á“á¢áŸŠá¸á“á’áºáá·á á‘á¼á›á–áŸ’ášáŸ‡á”á„áŸ’á‚áŸ†á¢á¶á…á†áŸ’á›á¾á™áá”á”á¶á“ááŸ‚áŸáŸ†áá½ášá˜á¼á›áŠáŸ’á‹á¶á“áŸ” áŸá¼á˜á—áŸ’á‡á¶á”áŸ‹á¢áŸŠá¸á“á’áºáá·ááŠá¾á˜áŸ’á”á¸á”áŸ’ášá¾á”áŸ’ášá¶áŸáŸ‹áá½ášá€áŸ’á”á¶á› Gemini Pro á…á»á„á€áŸ’ášáŸ„á™áŸ”";
    }

    async function handleSend() {
        const input = document.getElementById('userInput');
        const text = input.value.trim();
        if (!text) return;

        appendMsg('user', text);
        input.value = '';

        let response;
        if (isOnline) {
            try {
                const res = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${API_KEY}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ contents: [{ parts: [{ text: `á¢áŸ’á“á€á‚áºá‡á¶ AI ášá”áŸáŸ‹á¢á’á·ášá¶á‡áŸ” á˜á á¶á“á·á’á·á‚áº $220áŸ” á†áŸ’á›á¾á™áá”á‚áŸ’ášá”áŸ‹á—á¶áŸá¶ (KM/EN/TH/ZH/LO)áŸ” \nUser: ${text}` }] }] })
                });
                const data = await res.json();
                response = data.candidates[0].content.parts[0].text;
            } catch (e) {
                response = getOfflineResponse(text);
            }
        } else {
            response = getOfflineResponse(text);
        }

        appendMsg('bot', response);
        speak(response);
    }

    function appendMsg(sender, text) {
        const win = document.getElementById('chat-window');
        const div = document.createElement('div');
        div.className = `msg ${sender}`;
        div.innerText = text;
        win.appendChild(div);
        win.scrollTop = win.scrollHeight;
    }
</script>

</body>
</html>
